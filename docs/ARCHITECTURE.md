# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ AI News Bot

> –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-02-01
> –í–µ—Ä—Å–∏—è: 3.1.0 (Photo Integration)

---

## –û–±–∑–æ—Ä

Telegram-–±–æ—Ç –¥–ª—è –∫–∞–Ω–∞–ª–∞ **@ai_dlya_doma** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è AI-–Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏ "–∂–µ–Ω—â–∏–Ω—ã 25-45, –±—ã—Ç –∏ —Å–µ–º—å—è".

### –¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------|----------|
| –ú–æ–¥–µ—Ä–∞—Ü–∏—è | ‚úÖ –í–∫–ª—é—á–µ–Ω–æ | –†—É—á–Ω–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ |
| –†—É–±—Ä–∏–∫–∏ | ‚è∏Ô∏è –ì–æ—Ç–æ–≤–æ | 10 —Ä—É–±—Ä–∏–∫, —Ç—Ä–µ–±—É–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏—è |
| –ù–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ | ‚è∏Ô∏è –ì–æ—Ç–æ–≤–æ | 11 –ø–æ—Å—Ç–æ–≤/–Ω–µ–¥–µ–ª—é, —Ç—Ä–µ–±—É–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏—è |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫ | ‚úÖ –í–∫–ª—é—á–µ–Ω–æ | GPT Image 1 + —É–º–Ω—ã–π –≤—ã–±–æ—Ä OG |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
news-assistant-bot/
‚îú‚îÄ‚îÄ main.py                 # –†–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (—Ç–µ—Å—Ç)
‚îú‚îÄ‚îÄ scheduler.py            # –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # Pydantic Settings (–≤–∞–ª–∏–¥–∞—Ü–∏—è .env)
‚îÇ   ‚îú‚îÄ‚îÄ config_loader.py    # –ó–∞–≥—Ä—É–∑–∫–∞ prompts.yaml
‚îÇ   ‚îú‚îÄ‚îÄ logger.py           # Logging —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ rss_parser.py       # RSS –ø–∞—Ä—Å–∏–Ω–≥ + tenacity retry
‚îÇ   ‚îú‚îÄ‚îÄ og_parser.py        # OG-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è + –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ ai_processor.py     # Claude API (–¥–∞–π–¥–∂–µ—Å—Ç) + retry
‚îÇ   ‚îú‚îÄ‚îÄ telegram_bot.py     # –ë–æ—Ç —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ database.py         # SQLite: sent_articles
‚îÇ   ‚îú‚îÄ‚îÄ post_generator.py   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ post_queue.py       # SQLite –æ—á–µ—Ä–µ–¥—å –ø–æ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ image_generator.py  # GPT Image 1 + —É–º–Ω—ã–π –≤—ã–±–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ moderation.py       # –°–∏—Å—Ç–µ–º–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ rubrics.py          # 10 —Ä—É–±—Ä–∏–∫ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ rss_feeds.json      # 21 RSS –∏—Å—Ç–æ—á–Ω–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ prompts.yaml        # –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤ + image_templates
‚îÇ   ‚îî‚îÄ‚îÄ content_plan.yaml   # –ù–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ news_bot.db         # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ images/             # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îú‚îÄ‚îÄ news_bot.log        # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ (5MB, 5 backups)
‚îÇ   ‚îî‚îÄ‚îÄ news_bot_errors.log # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md     # ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ STATUS.md           # –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏ TODO
‚îÇ   ‚îú‚îÄ‚îÄ content_strategy.md # 9 —Ä—É–±—Ä–∏–∫, 20 –≥–æ—Ç–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ monetization.md     # –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ .env                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ù–ï –≤ git!)
‚îú‚îÄ‚îÄ .env.example            # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ requirements.txt        # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. config.py ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `ANTHROPIC_API_KEY` | –î–∞ | Claude API –∫–ª—é—á |
| `OPENAI_API_KEY` | –î–∞ | OpenAI API (–¥–ª—è GPT Image) |
| `TELEGRAM_BOT_TOKEN` | –î–∞ | –¢–æ–∫–µ–Ω –æ—Ç @BotFather |
| `TELEGRAM_USER_ID` | –î–∞ | ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–æ—Ç–∞ |
| `TELEGRAM_CHANNEL_ID` | –ù–µ—Ç | ID –∫–∞–Ω–∞–ª–∞ (@username –∏–ª–∏ —á–∏—Å–ª–æ) |
| `USE_MODERATION` | –ù–µ—Ç | –†—É—á–Ω–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ (default: true) |
| `USE_RUBRICS` | –ù–µ—Ç | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Ä—É–±—Ä–∏–∫–∞–º (default: false) |
| `USE_NEW_SCHEDULE` | –ù–µ—Ç | –ù–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (default: false) |
| `LOG_LEVEL` | –ù–µ—Ç | DEBUG/INFO/WARNING/ERROR |

---

### 2. image_generator.py ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫

**–ö–ª–∞—Å—Å ImageGenerator:**

```python
generator = get_image_generator()

# –ü—Ä—è–º–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
path = generator.generate(prompt="...", category="kitchen")

# –£–º–Ω—ã–π –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
path, source = generator.choose_image_strategy(
    og_image_url="https://...",     # OG-–∫–∞—Ä—Ç–∏–Ω–∫–∞ –∏–∑ —Å—Ç–∞—Ç—å–∏
    image_prompt="...",              # –ü—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    category="kitchen",              # –ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–ª—è —à–∞–±–ª–æ–Ω–∞
    post_id=123                      # ID –ø–æ—Å—Ç–∞ (–¥–ª—è –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞)
)
# source: "og_image" | "generated" | "none"
```

**–õ–æ–≥–∏–∫–∞ choose_image_strategy():**

```
1. –ï—Å—Ç—å OG-–∫–∞—Ä—Ç–∏–Ω–∫–∞?
   ‚îú‚îÄ –ù–µ—Ç ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   ‚îî‚îÄ –î–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ
           ‚îú‚îÄ –≠—Ç–æ –∏–∫–æ–Ω–∫–∞/–ª–æ–≥–æ? ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º
           ‚îî‚îÄ –ù–µ—Ç ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä—ã
                   ‚îú‚îÄ width >= 800 –∏ height >= 600? ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º OG
                   ‚îî‚îÄ –ù–µ—Ç ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º

2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ GPT Image 1:
   - –ú–æ–¥–µ–ª—å: gpt-image-1
   - –†–∞–∑–º–µ—Ä: 1024x1024
   - –ö–∞—á–µ—Å—Ç–≤–æ: medium
   - –®–∞–±–ª–æ–Ω –∏–∑ config/prompts.yaml –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (config/prompts.yaml):**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| `kitchen` | –ö—É—Ö–Ω—è, –≥–æ—Ç–æ–≤–∫–∞, —Ä–µ—Ü–µ–ø—Ç—ã |
| `kids` | –î–µ—Ç–∏, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –∏–≥—Ä—ã |
| `home` | –î–æ–º, —É—é—Ç, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è |
| `finance` | –§–∏–Ω–∞–Ω—Å—ã, –±—é–¥–∂–µ—Ç, —ç–∫–æ–Ω–æ–º–∏—è |
| `planning` | –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
| `tool_review` | –û–±–∑–æ—Ä AI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ |
| `news` | –ù–æ–≤–æ—Å—Ç–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| `prompt_home` | –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –¥–æ–º–∞ |
| `lifehack` | –õ–∞–π—Ñ—Ö–∞–∫–∏, —Å–æ–≤–µ—Ç—ã |
| `free_service` | –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã |
| `collection` | –ü–æ–¥–±–æ—Ä–∫–∏ |
| `digest` | –î–∞–π–¥–∂–µ—Å—Ç—ã |

**–°—Ç–∏–ª—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
- Soft 3D render
- –¢—ë–ø–ª—ã–µ –ø–∞—Å—Ç–µ–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ (cream, peach, sage green, dusty rose)
- –ë–ï–ó –ª—é–¥–µ–π –∏ –ª–∏—Ü
- –ë–ï–ó —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- –£—é—Ç–Ω–∞—è, –¥—Ä—É–∂–µ–ª—é–±–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞

---

### 3. og_parser.py ‚Äî OG-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–§—É–Ω–∫—Ü–∏–∏:**

```python
from og_parser import get_og_image, check_image_quality, download_image

# –ü–æ–ª—É—á–∏—Ç—å OG-–∫–∞—Ä—Ç–∏–Ω–∫—É —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
og_url = get_og_image("https://example.com/article")

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ
result = check_image_quality(og_url)
# ‚Üí {"is_valid": True, "width": 1200, "height": 800}
# ‚Üí {"is_valid": False, "reason": "Width 400px < 800px minimum"}

# –°–∫–∞—á–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
local_path = download_image(og_url)
# ‚Üí "data/images/abc123.jpg"
```

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–∫–æ–Ω–æ–∫/–ª–æ–≥–æ—Ç–∏–ø–æ–≤:**

–ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è:
```
logo, icon, favicon, avatar, badge, sprite, button, ad-, banner, pixel,
.svg, 1x1, tracking, placeholder, default, og-default, social-default,
no-image, noimage, missing, blank, thumb_, _thumb, thumbnail, mini,
gravatar, profile, user-avatar
```

---

### 4. telegram_bot.py ‚Äî Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìã –û—á–µ—Ä–µ–¥—å  ‚îÇ üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üîÑ –û–±–Ω–æ–≤–∏—Ç—å ‚îÇ ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Inline-–∫–Ω–æ–ø–∫–∏ –ø–æ–¥ –ø–æ—Å—Ç–∞–º–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å ‚îÇ üìÖ –û—Ç–ª–æ–∂–∏—Ç—å    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å‚îÇ ‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–æ–º–∞–Ω–¥—ã:**

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|---------|----------|-------------|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ | –í—Å–µ |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ | –í—Å–µ |
| `/generate` | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 5 –ø–æ—Å—Ç–æ–≤ | –¢–æ–ª—å–∫–æ owner |
| `/preview` | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—á–µ—Ä–µ–¥—å | –í—Å–µ |
| `/publish_now` | –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –ø–æ—Å—Ç | –¢–æ–ª—å–∫–æ owner |

---

### 5. scheduler.py ‚Äî –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:**

| –í—Ä–µ–º—è | –î–µ–π—Å—Ç–≤–∏–µ |
|-------|----------|
| 08:00 | `generate_daily_posts()` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è 5 –ø–æ—Å—Ç–æ–≤ |
| 09:00 | `publish_scheduled_post()` ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è #1 |
| 12:00 | `publish_scheduled_post()` ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è #2 |
| 15:00 | `publish_scheduled_post()` ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è #3 |
| 18:00 | `publish_scheduled_post()` ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è #4 |
| 21:00 | `publish_scheduled_post()` ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è #5 |

**–ü–∞–π–ø–ª–∞–π–Ω –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**

```python
def publish_scheduled_post():
    post = queue.get_next_pending()

    # –£–º–Ω—ã–π –≤—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    image_path, source = img_generator.choose_image_strategy(
        og_image_url=post.get("image_url"),
        image_prompt=post.get("image_prompt"),
        category=post.get("format"),
        post_id=post["id"]
    )

    # –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∫–∞–Ω–∞–ª
    if image_path:
        sender.send_photo_to_channel(image_path, post["post_text"])
    else:
        sender.send_to_channel(post["post_text"])

    queue.mark_published(post["id"])
```

---

## –ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        08:00 MSK                                ‚îÇ
‚îÇ  RSS Feeds (21 –∏—Å—Ç–æ—á–Ω–∏–∫) ‚Üí RSSParser.fetch_recent_news()        ‚îÇ
‚îÇ      ‚Üì                                                          ‚îÇ
‚îÇ  OGParser.enrich_with_og_images() ‚Üí –î–æ–±–∞–≤–ª—è–µ–º OG-–∫–∞—Ä—Ç–∏–Ω–∫–∏       ‚îÇ
‚îÇ      ‚Üì                                                          ‚îÇ
‚îÇ  PostGenerator.classify_article() [Haiku] ‚Üí –§–∏–ª—å—Ç—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö  ‚îÇ
‚îÇ      ‚Üì                                                          ‚îÇ
‚îÇ  PostGenerator.generate_post() [Sonnet] ‚Üí 5 –ø–æ—Å—Ç–æ–≤              ‚îÇ
‚îÇ      ‚Üì                                                          ‚îÇ
‚îÇ  PostQueue.add_post() ‚Üí SQLite –æ—á–µ—Ä–µ–¥—å (status: pending)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   –ú–æ–¥–µ—Ä–∞—Ü–∏—è (USE_MODERATION=true)               ‚îÇ
‚îÇ  Telegram Bot ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å—Ç—ã —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏              ‚îÇ
‚îÇ      ‚Üì                                                          ‚îÇ
‚îÇ  –í–ª–∞–¥–µ–ª–µ—Ü –Ω–∞–∂–∏–º–∞–µ—Ç ‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å                               ‚îÇ
‚îÇ      ‚Üì                                                          ‚îÇ
‚îÇ  ImageGenerator.choose_image_strategy()                         ‚îÇ
‚îÇ      ‚îú‚îÄ OG >= 800px? ‚Üí –°–∫–∞—á–∏–≤–∞–µ–º OG                             ‚îÇ
‚îÇ      ‚îî‚îÄ –ù–µ—Ç ‚Üí GPT Image 1 –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç (soft 3D —Å—Ç–∏–ª—å)            ‚îÇ
‚îÇ      ‚Üì                                                          ‚îÇ
‚îÇ  TelegramSender.send_photo_to_channel()                         ‚îÇ
‚îÇ      ‚Üì                                                          ‚îÇ
‚îÇ  PostQueue.mark_published()                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –î–µ–ø–ª–æ–π

### VPS (—Ç–µ–∫—É—â–∏–π)

```
–°–µ—Ä–≤–µ—Ä: 141.227.152.143 (OVH)
–ü—É—Ç—å: /opt/news-assistant-bot
–°–µ—Ä–≤–∏—Å: ai-news-bot.service (systemd)
Python: venv –≤ /opt/news-assistant-bot/venv
```

**–ö–æ–º–∞–Ω–¥—ã:**

```bash
# SSH
ssh root@141.227.152.143

# –°—Ç–∞—Ç—É—Å
systemctl status ai-news-bot

# –õ–æ–≥–∏
journalctl -u ai-news-bot -f

# –†–µ—Å—Ç–∞—Ä—Ç
systemctl restart ai-news-bot
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ VPS

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã (Windows)
scp "D:\AI\projects\news-assistant-bot\src\*.py" root@141.227.152.143:/opt/news-assistant-bot/src/
scp "D:\AI\projects\news-assistant-bot\config\prompts.yaml" root@141.227.152.143:/opt/news-assistant-bot/config/
scp "D:\AI\projects\news-assistant-bot\scheduler.py" root@141.227.152.143:/opt/news-assistant-bot/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
ssh root@141.227.152.143 "cd /opt/news-assistant-bot && ./venv/bin/pip install Pillow beautifulsoup4"

# –†–µ—Å—Ç–∞—Ä—Ç
ssh root@141.227.152.143 "systemctl restart ai-news-bot"
```

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```
feedparser>=6.0.11
anthropic>=0.76.0
python-telegram-bot>=21.7
python-dotenv>=1.0.1
schedule>=1.2.2
requests>=2.32.3
pydantic>=2.0.0
pydantic-settings>=2.0.0
tenacity>=8.2.0
openai>=1.0.0
Pillow>=10.0.0
beautifulsoup4>=4.12.0
PyYAML>=6.0.0
```

---

## –≠–∫–æ–Ω–æ–º–∏–∫–∞

| –°—Ç–∞—Ç—å—è | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å |
|--------|---------------|
| Claude Haiku (–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è) | ~$1-2 |
| Claude Sonnet (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è) | ~$3-5 |
| GPT Image 1 (150 –∫–∞—Ä—Ç–∏–Ω–æ–∫ √ó $0.02) | ~$3 |
| VPS (OVH) | ‚Ç¨3.50 |
| **–ò–¢–û–ì–û** | **~$11-14** |

---

## –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

- [x] Phase 1: –ë–∞–∑–æ–≤—ã–π –±–æ—Ç + –¥–∞–π–¥–∂–µ—Å—Ç
- [x] Phase 2: 5 –ø–æ—Å—Ç–æ–≤/–¥–µ–Ω—å + –æ—á–µ—Ä–µ–¥—å
- [x] Phase 3: –ú–æ–¥–µ—Ä–∞—Ü–∏—è + —Ä—É–±—Ä–∏–∫–∏
- [x] Photo Integration: GPT Image 1 + —É–º–Ω—ã–π –≤—ã–±–æ—Ä OG

### ‚è∏Ô∏è –ì–æ—Ç–æ–≤–æ, –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ

- [ ] USE_RUBRICS=true ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ 10 —Ä—É–±—Ä–∏–∫–∞–º
- [ ] USE_NEW_SCHEDULE=true ‚Äî 11 –ø–æ—Å—Ç–æ–≤/–Ω–µ–¥–µ–ª—é

### üìã TODO

- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (ERR, –æ—Ö–≤–∞—Ç, —Ä–µ–ø–æ—Å—Ç—ã)
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è consumer vs enterprise
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤
