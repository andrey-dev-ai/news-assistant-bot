# –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞: news-assistant-bot

> **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2026-02-01
> **–í–µ—Ä—Å–∏—è:** 3.3.0

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| VPS –¥–µ–ø–ª–æ–π | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 141.227.152.143, —Å–µ—Ä–≤–∏—Å `ai-news-bot` |
| –ú–æ–¥–µ—Ä–∞—Ü–∏—è | ‚úÖ –í–∫–ª—é—á–µ–Ω–æ | –†—É—á–Ω–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Claude Haiku + Sonnet |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | GPT Image 1 + —É–º–Ω—ã–π –≤—ã–±–æ—Ä OG |
| –†—É–±—Ä–∏–∫–∏ | ‚è∏Ô∏è –ì–æ—Ç–æ–≤–æ | 10 —Ä—É–±—Ä–∏–∫, `USE_RUBRICS=false` |
| –ù–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ | ‚è∏Ô∏è –ì–æ—Ç–æ–≤–æ | 11 –ø–æ—Å—Ç–æ–≤/–Ω–µ–¥–µ–ª—é, `USE_NEW_SCHEDULE=false` |

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# /opt/news-assistant-bot/.env
USE_MODERATION=true      # –†—É—á–Ω–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤
USE_RUBRICS=false        # –†—É–±—Ä–∏–∫–∏ (–≥–æ—Ç–æ–≤–æ, –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ)
USE_NEW_SCHEDULE=false   # –ù–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–≥–æ—Ç–æ–≤–æ, –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ)
```

---

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Phase 1: Production-Ready ‚úÖ
- Pydantic –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- Logging —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
- Retry-–ª–æ–≥–∏–∫–∞
- Graceful shutdown

### Phase 2: 5 –ø–æ—Å—Ç–æ–≤/–¥–µ–Ω—å ‚úÖ
- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–æ—Å—Ç–æ–≤ (`post_generator.py`)
- –û—á–µ—Ä–µ–¥—å –ø–æ—Å—Ç–æ–≤ (`post_queue.py`)
- –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (`/generate`, `/preview`, `/publish_now`)

### Phase 3: –ú–æ–¥–µ—Ä–∞—Ü–∏—è ‚úÖ
- –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (`moderation.py`)
- –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (üìã –û—á–µ—Ä–µ–¥—å, üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, üîÑ –û–±–Ω–æ–≤–∏—Ç—å, ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏)
- Inline-–∫–Ω–æ–ø–∫–∏ –ø–æ–¥ –ø–æ—Å—Ç–∞–º–∏ (‚úÖ ‚ùå üìÖ ‚úèÔ∏è)
- 10 —Ä—É–±—Ä–∏–∫ (`rubrics.py`)
- 21 RSS-–∏—Å—Ç–æ—á–Ω–∏–∫

### Photo Integration ‚úÖ
- –£–º–Ω—ã–π –≤—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (OG vs –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- GPT Image 1 –≤ —Å—Ç–∏–ª–µ Soft 3D
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ OG-–∫–∞—Ä—Ç–∏–Ω–æ–∫

### Analytics ‚úÖ
- –ú–æ–¥—É–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (`src/analytics.py`)
- –¢–∞–±–ª–∏—Ü—ã: `post_stats`, `daily_metrics`
- –ú–µ—Ç—Ä–∏–∫–∏: views, forwards, reactions, ERR
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ message_id –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- –ö–æ–º–∞–Ω–¥–∞ `/stats` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫—É

### Content Filter ‚úÖ
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è enterprise/B2B –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–µ
- –ü–æ–ª–µ `audience`: consumer/enterprise/mixed
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reject enterprise –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ü–æ–Ω–∏–∂–µ–Ω–Ω—ã–π confidence –¥–ª—è mixed –∞—É–¥–∏—Ç–æ—Ä–∏–∏

---

## –ß—Ç–æ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

| –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----------|----------|
| ~~–ê–Ω–∞–ª–∏—Ç–∏–∫–∞~~ | ~~–í—ã—Å–æ–∫–∏–π~~ | ‚úÖ `src/analytics.py` ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| ~~–§–∏–ª—å—Ç—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞~~ | ~~–°—Ä–µ–¥–Ω–∏–π~~ | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä (audience field) |
| A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | –ù–∏–∑–∫–∏–π | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø–æ—Å—Ç–æ–≤ |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –í–∫–ª—é—á–∏—Ç—å —Ä—É–±—Ä–∏–∫–∏
```bash
ssh root@141.227.152.143
echo "USE_RUBRICS=true" >> /opt/news-assistant-bot/.env
systemctl restart ai-news-bot
```

### 2. –í–∫–ª—é—á–∏—Ç—å –Ω–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
```bash
echo "USE_NEW_SCHEDULE=true" >> /opt/news-assistant-bot/.env
systemctl restart ai-news-bot
```

### 3. –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –¢–∞–±–ª–∏—Ü—ã: `post_stats`, `daily_metrics`
- –ú–µ—Ç—Ä–∏–∫–∏: ERR, –æ—Ö–≤–∞—Ç, —Ä–µ–ø–æ—Å—Ç—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram API

---

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞
ssh root@141.227.152.143 "systemctl status ai-news-bot"

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
ssh root@141.227.152.143 "journalctl -u ai-news-bot -f"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
ssh root@141.227.152.143 "systemctl restart ai-news-bot"

# –û—á–∏—Å—Ç–∏—Ç—å –æ—á–µ—Ä–µ–¥—å
ssh root@141.227.152.143 "sqlite3 /opt/news-assistant-bot/data/news_bot.db \"DELETE FROM post_queue WHERE status IN ('pending', 'pending_approval');\""
```

---

## –î–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã
scp "D:\AI\projects\news-assistant-bot\src\*.py" root@141.227.152.143:/opt/news-assistant-bot/src/

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
ssh root@141.227.152.143 "systemctl restart ai-news-bot"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
ssh root@141.227.152.143 "journalctl -u ai-news-bot --since '2 minutes ago'"

# 4. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å
git add . && git commit -m "–æ–ø–∏—Å–∞–Ω–∏–µ" && git push
```
